///////////////////////////////** 原始注释 2023 杨hz **//////////////////
//////////////////////////////////////////////////////////////////

主程序
vision.cpp为图像采集节点-彩色相机
vision_processing.cpp为图像处理节点
//测试程序
vision_control_test.cpp为相机控制测试
vision_display_test.cpp为传输图像显示测试


图像采集节点采用大恒相机库进行相机控制，采集图像格式为RGB //若使用opencv控制相机，采集图像格式为BGR
//大恒相机采集图像尺寸为 1920*1200
//具体开发或api的使用可以参考大恒图像的官方案例example
下载地址https://www.daheng-imaging.com/downloads/

图像处理节点采用opencv进行图像处理
opencv彩色图片的格式为 BGR ！！！
注意节点间通信不要搞错了格式：vision_processing.cpp中图片处理统一采用 BGR 格式 //若接收图像为RGB，处理前要先转成BGR
//现在将传输的图片格式统一为 BGR

/////////////////////////////////** 新增注释 2024 王jg **/////////////////////////////////



vision.cpp 核心功能
相机硬件控制
大恒相机驱动初始化/关闭 (InitDahengEnv, CloseCamera)
图像采集控制 (StartAcq, StopAcq, AcqSingleImg)
支持1920x1200→960x600降采样
ROS通信
发布话题：/robot_image (sensor_msgs/Image)
订阅话题：/camera_control (std_msgs/Int32)
指令0: 打开相机
指令1: 关闭相机
指令2: 开始采集
指令3: 停止采集
---
 
vision_processing.cpp 核心功能
视觉处理流水线
16点标定法计算内外参 (camera_calibration)
生成像素-场地坐标映射表 (groundInfo[640][480])
霍夫圆检测足球/机器人
2. ROS通信
订阅话题：/robot_image (原始图像输入)
发布话题：
/robot_poses (自定义位姿数据)
/calibration_status (标定状态)
---

 ---------------------------------------------------------------------------------------
|vision.cpp (采集) → /robot_image → vision_processing.cpp (处理) → /robot_poses → 策略模块 |
 ---------------------------------------------------------------------------------------

-----------------------------------------------------------------------------------------
 图像格式数据流：
 大恒相机：1920x1200
 开始采集最原始状态Bayer格式 → RGB→ 双线性插值 → 960x600（降采样）→ 
 BGR8（Opencv图像格式）→ cv_bridge (ROS图像消息)→ /robot_image （定时器发布：100帧/s 由于延迟实际达不到）
 
 
  
|   处理阶段   | 参数说明   | 技术实现 | 性能指标 |
------------------------------------------------------------------
| 原始采集     | Bayer格式 1920x1200 | 大恒相机SDK | 12-bit色深 |
| 色彩空间转换  | RAW→RGB | DxImageProc库 | 耗时3-5ms |
| 图像降采样   | 50%缩放→960x600 | OpenCV双线性插值 | 耗时1-2ms |
| 格式标准化   | RGB→BGR8 | OpenCV cvtColor | 耗时0.5-1ms |
| ROS消息封装  | sensor_msgs/Image | cv_bridge转换 | 消息大小~1.7MB |
| 网络传输     | /robot_image话题 | ROS2 DDS协议 | 目标100Hz |

------------------------------------------------------------------
| 阶段         | 分辨率    | 像素数量  | 数据量(未压缩) |
|--------------|----------|----------|----------------|
| 原始图像     | 1920x1200| 2,304,000| 8.29MB         |
| 降采样后     | 960x600  | 576,000  | 2.07MB         |
| ROS消息      | 960x600  | 576,000  | 1.73MB (BGR8)  |
 
 
